
<div class="d-flex align-items-start justify-content-between mb-2">
    <h5 class="common-heading">
      <!-- Phase - {{this.subsidyCtr}} -->
       Status</h5>
    <a class="text-dark h5" title="Back" href="javascript:void(0)" (click)="backClicked()"><i
            class="icon-arrow-left-solid"></i></a>
  </div>
  
  
  
  <form [formGroup]="updateForm" (ngSubmit)="onSubmit()">
  
    <ng-container *ngIf="updStatus==0">
  
        <div class="table-responsive">
                <!-- <thead>
                    <tr>
                        <th style="width:40px">Sl#</th>
                        <th>Activity Details </th>
                        <th>Status <span class="text-danger">*</span></th>
  
                        <th width="250px">Upload  Photos<span class="text-danger">*</span><br><small class="text-danger">Only Png, Jpeg, Jpg (Max size 1 MB)</small>
                        </th>
                        <th width="350px">Remark </th>
                    </tr>
                </thead> -->
                <div class="d-none d-lg-block p-3 border bg-light mb-2">
                    <div class="row">
                            <div class="col-3">Activity Details </div>
                            <div class="col-3">Status <span class="text-danger">*</span></div>
  
                            <div class="col-3" width="250px">Upload  Photos<span class="text-danger">*</span><br><small class="text-danger">Only Png, Jpeg, Jpg (Max size 1 MB)</small>
                            </div>
                            <div class="col-3" width="350px">Remark </div>
                    </div>
                </div>
                <div class="p-3 border mb-2" *ngFor="let activity of lastUpd;let rwCnt=index;">
  
                    <div class="row">
                        <div class="col-md-6 col-lg-3 d-none">{{rwCnt+1}}</div>
                        <div class="col-md-6 col-lg-3">
                                <label class="d-lg-none d-block"><strong>Activity Details</strong></label>
                            {{activity.itemName}}
                        </div>
                        <div class="col-md-6 col-lg-3">
                                <label class="d-lg-none d-block mt-3 "><strong>Status</strong> <span class="text-danger">*</span></label>
                            <div *ngIf="(activity.authActionStatus==3 || activity.authActionStatus==1|| activity.farmerActionStatus==null || activity.farmerUpdate==0 ) ||editPhaseActivity==0">
                            <div class="form-check form-check-inline" [ngClass]="isCompleted" >
                                    <input class="form-check-input" name="{{activity.activityActnId}}"
                                        (click)="chooseAction(activity.activityActnId, 1);" type="radio"
                                        formControlName="{{activity.activityActnId}}" id="{{activity.activityActnId}}_compl"
                                        [value]="2">
                                    <label class="form-check-label"
                                        for="{{activity.activityActnId}}_compl" [ngClass]="isCompleted">Completed</label>
                            </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" name="{{activity.activityActnId}}"
                                        (click)="chooseAction(activity.activityActnId, 2);" type="radio"
                                        formControlName="{{activity.activityActnId}}"
                                        id="{{activity.activityActnId}}_inprog" [value]="1">
                                    <label class="form-check-label" for="{{activity.activityActnId}}_inprog">In
                                        Progress</label>
                                </div>
                            </div>
                            <div  *ngIf="activity.authActionStatus==2 && activity.farmerActionStatus!=''">
                                {{activity.farmerActionStatusTxt}}
                            </div>
                        </div>
                        <!-- <div class="input-group custom-file-button">
                          <label class="input-group-text" for="inputGroupFile">Your Custom Text</label>
                          <input type="file" class="form-control" id="inputGroupFile">
                      </div> -->
                        <div class="col-md-6 col-lg-3">
                                <label class="d-lg-none d-block mt-3 "><strong>Upload  Photos</strong> <span class="text-danger">*</span><br><small class="text-danger">Only Png, Jpeg, Jpg (Max size 1 MB)</small></label>
                            <div *ngIf="(activity.authActionStatus==3 || activity.authActionStatus==1|| activity.farmerActionStatus==null || activity.farmerUpdate==0) ||(activity.farmerUpdate==1 && editPhaseActivity==0)">
                                <div class="mb-3" *ngFor="let number of farmerphotoarr;let i= index;">
                                    <div *ngIf="ngElements[activity.activityActnId+'_1']"
                                        class="cls_{{activity.activityActnId}}_{{number}}_file ">
                                        <div class="input-group custom-file-button">
                                          <label class="input-group-text" for="{{activity.activityActnId}}_{{number}}_file">Phase {{number+1}}</label>
                                          <!-- <label class="form-label" for="{{activity.activityActnId}}_{{number}}_file">Phase {{i+1}}</label> -->
                                          <input type="file" formControlName="{{activity.activityActnId}}_{{number}}_file"
                                              id="{{activity.activityActnId}}_{{number}}_file" class="form-control">
                                                  <a class="text-danger h5" title="Download" target="_blank"
                                          href="{{activity.farmerUploadedPhoto[i].farmFileUploadUrl}}" *ngIf="editPhaseActivity==0" ><i
                                              class="icon-file-download-solid"></i> </a>
                                              <input type="hidden" class="form-control" value="{{activity.farmerUploadedPhoto[i].farmFileUpload}}"  id="{{activity.activityActnId}}_{{number}}_hdnfile" *ngIf="editPhaseActivity==0" >
                                          </div>
                                    </div>
  
                                </div>
  
                                <div *ngIf="ngElements[activity.activityActnId+'_2']"
                                    class="cls_{{activity.activityActnId}}_date">
                                    <input type="date" id="{{activity.activityActnId}}_date"
                                        formControlName="{{activity.activityActnId}}_date" class="form-control" min="{{curDate | date:'yyyy-MM-dd'}}">
                                        <input type="file" formControlName="{{activity.activityActnId}}_prog_file"
                                        id="{{activity.activityActnId}}_prog_file" class="form-control mt-1">
                                </div>
                            </div>
                            <div  *ngIf="activity.authActionStatus==2 && activity.farmerActionStatus!=null ">
                                <div *ngIf="activity.farmerActionStatus == 1; else elseBlock">
                                    {{activity.farmerUpdateDate}}
                                </div>
  
                                <ng-template #elseBlock>
                                    <span *ngFor="let farmerUploadedPhoto of activity.farmerUploadedPhoto;" class="mx-1">
                                        <a href="javascript:void(0);" (click)="getPhoto(farmerUploadedPhoto.farmFileUploadUrl)">
                                            <img src="{{farmerUploadedPhoto.farmFileUploadUrl}}" class="bg-light"
                                        style="height: 40px;">
                                        </a>
                                    </span>
  
                                </ng-template>
                            </div>
                        </div>
  
                        <div class="col-md-6 col-lg-3">
                                <label class="d-lg-none d-block "><strong>Remark</strong></label>
                            <div *ngIf="activity.authActionStatus==3 || activity.authActionStatus==1">
                                <label class="mb-1">Auth Remark : <span class="text-danger">{{activity.authRemark}}</span></label>
                            </div>
                            <textarea rows="2" cols="2" id="{{activity.activityActnId}}_remark"
                                formControlName="{{activity.activityActnId}}_remark" class="form-control"></textarea>
                        </div>
  
                        </div>
  
  
                    </div>
                </div>
      <!-- <div class="row" *ngIf="docResFlg==1 && completeItem==totalItem">
            <div class="col-md-4 col-lg-4">
                <div class="form-group">
                    <label class="form-label"><span class="text-danger">*</span> Intimation Document</label>
                </div>
            </div>
            <div class="col-md-6 col-lg-6">
                <div class="row">
                    <div class="col-md-8 col-lg-8">
                        <div class="form-group">
                            <input type="file" id="intmnFile" class="form-control" />
                            <div class="d-flex justify-content-between">
                                <small class="text-danger">Only JPG,JPEG,GIF,PDF,ZIP max size 10 MB</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4 mt-2">
                        <a *ngIf="docResFlNm!='';" class="text-info h5" download title="Download" target="_blank"
                                        href="{{docResFlNm}}">Download Format </a>
                    </div>
                </div>
            </div>
        </div> -->
        <div *ngIf="applicationOnlineCompletion!=''">
  
          <!-- Button trigger modal -->
  
          <!-- <div  #apponlineCompletion id="someModal"  class="modal fade"  id="apponlineCompletion" tabindex="-1" aria-labelledby="apponlineCompletion" aria-hidden="true"> -->
            <ng-template #apponlineCompletionModal id="apponlineCompletionModal" let-modal>
            <!-- <div class="modal-dialog modal-lg"> -->
              <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">MKUY Online Completion</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                    (click)="modal.dismiss('Cross click')">
                    <i class="icon-times-solid"></i>
                </button>
            </div>
              <!-- <div class="modal-content"> -->
                        <!-- <div class="modal-header">
                          <h5 class="modal-title">MKUY Online Completion</h5>
                          <button type="button" class="btn-close" id="apponlineCompletionClose" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div> -->
              <form focusInvalidInput [formGroup]="schemeForm" (submit)="doCompletion();">
                <div class="control-div">
                    <div *ngFor="let sectnInfo of respDynm;let aRwCnt=index;">
                      <h5 class="common-heading2 m-2">
                          <span *ngIf="lang==='Odia'; else engLang">
                              {{sectnInfo.sectionNameOdia}}
                          </span>
                          <ng-template #engLang>
                              {{sectnInfo.sectionName}}
                          </ng-template>
                      </h5>
  
                    <div class="row m-1">
                      <ng-container *ngFor="let ctrlInfo of sectnInfo.sectionCtrls;let i=index;">
                        <ng-container *ngIf="ctrlInfo.tinControlType==8; then shwAddMore"></ng-container>
                        <ng-template #shwAddMore>
                            <div id="{{ctrlInfo.vchLabelName}}">
                              <div class="col-md-12  clsDiv_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                  [ngClass]="ctrlInfo.jsnDispTagArray[0].tagFieldSts == 1?'d-none' : ''">
  
                                  <div class="" >
  
                                  <table class="table table-bordered">
                                      <thead>
                                          <tr>
                                              <th>Sl#</th>
                                              <th
                                                  *ngFor="let addMoreCtrlInfo of ctrlInfo.jsnControlArray[0].ctrlAddMore;let j=index;">
                                                  <span class="text-danger"
                                                      *ngIf="addMoreCtrlInfo['columnMnd']==1">*</span>
  
                                                  {{addMoreCtrlInfo['columnName']}}
                                              </th>
                                              <th width="180px;">Action</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <ng-container
                                              *ngIf="scmFrmAdmObj[ctrlInfo.jsnControlArray[0].ctrlName].length!=0">
                                              <tr
                                                  *ngFor="let addMrArr of (scmFrmAdmObj[ctrlInfo.jsnControlArray[0].ctrlName]).controls;let adRowCtr=index">
                                                  <td>{{adRowCtr+1}}</td>
                                                  <td formArrayName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                                      *ngFor="let addMoreCtrlInfo of ctrlInfo.jsnControlArray[0].ctrlAddMore;let j=index;">
  
                                                      <ng-container
                                                          [ngSwitch]="ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnType">
                                                          <ng-container *ngSwitchCase="'2'">
                                                              <select
                                                                  class="form-select {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                  id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}"
                                                                  *ngIf="ctrlInfo.jsnControlArray[0].ctrlAddMore[j].isDependent==1" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)">
                                                                  <option value="">Select</option>
                                                              </select>
                                                              <select
                                                                  class="form-select {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                  id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}"
                                                                  *ngIf="ctrlInfo.jsnControlArray[0].ctrlAddMore[j].isDependent!=1" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)" >
                                                                  <option value="">Select</option>
                                                                  <option
                                                                      *ngFor="let addMoreOpts of ctrlInfo.jsnControlArray[0].ctrlAddMore[j].optionArr;let addMoreOptK=index;"
                                                                      [selected]="addMoreOpts.optionValue == ctrlInfo.vchFieldValue"
                                                                      value="{{addMoreOpts.optionValue}}">
                                                                      {{addMoreOpts.optionText}}</option>
                                                              </select>
                                                          </ng-container>
                                                          <ng-container *ngSwitchCase="'6'">
                                                              <input type="text" autocomplete="off" appBlockCopyPaste
                                                                  (keypress)="keyPressEvt(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].textType,$event,ctrlInfo.jsnControlArray[0].ctrlName+'_'+adRowCtr+'_'+j)"
                                                              (keyup)="keyUpEvt(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].textType,$event,ctrlInfo.jsnControlArray[0].ctrlName+'_'+adRowCtr+'_'+j)"
                                                                  class="form-control {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                  id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)"/>
                                                          </ng-container>
                                                          <ng-container *ngSwitchCase="'7'">
                                                              <textarea autocomplete="off"
                                                                  class="form-control {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                  id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)"></textarea>
                                                          </ng-container>
  
                                                          <ng-container *ngSwitchCase="'9'">
                                                              <div class="input-group">
                                                                  <input type="text" autocomplete="off" appBlockCopyPaste
                                                                      class="form-control {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                      placeholder="DD/MM/YYYY" ngbDatepicker
                                                                      #d="ngbDatepicker" readonly
                                                                      [minDate]="minDate"
                                                                      id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}"
                                                                      [maxDate]="maxDate" (click)="d.toggle()" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)" />
                                                                  <span class="input-group-text"
                                                                      (click)="d.toggle()"><i
                                                                          class="icon-calendar"></i></span>
                                                              </div>
  
                                                          </ng-container>
  
                                                          <ng-container *ngSwitchCase="'10'">
  
                                                              <div class="input-group">
  
  
                                                                  <input type="time" autocomplete="off" appBlockCopyPaste
                                                                      class="form-control  {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                      id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)"/>
  
  
                                                              </div>
  
  
  
  
                                                          </ng-container>
  
  
  
  
  
                                                          <ng-container *ngSwitchCase="'11'">
  
                                                              <div class="input-group">
  
                                                                  <input type="datetime-local" autocomplete="off" appBlockCopyPaste
                                                                      class="form-control datetime {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                      id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}"
                                                                      placeholder="DD/MM/YYYY, HH:MM" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)" />
  
                                                              </div>
  
                                                          </ng-container>
  
  
  
  
                                                          <ng-container *ngSwitchDefault>
                                                              <input type="text" autocomplete="off" appBlockCopyPaste
                                                                  class="form-control {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId}} {{ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls}}"
                                                                  id="{{ctrlInfo.jsnControlArray[0].ctrlName}}_{{adRowCtr}}_{{j}}" [readonly]="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[j].columnCls)"/>
                                                          </ng-container>
                                                      </ng-container>
  
                                                  </td>
                                                  <td>
                                                    <!-- {{(ctrlInfo.jsnControlArray[0].ctrlAddMore).length | json}} -->
                                                      <button type="button"
                                                          (click)="addRow(ctrlInfo.jsnControlArray[0].ctrlName,adRowCtr,(ctrlInfo.jsnControlArray[0].ctrlAddMore).length,ctrlInfo.jsnControlArray[0].ctrlAddMore,ctrlInfo.jsnControlArray[0].ctrlAddMore[0].columnCls)"
                                                          class="btn btn-sm btn-warning me-2 ">+</button>
                                                      <button type="button" *ngIf="adRowCtr>0"
                                                          (click)="removeRow(ctrlInfo.jsnControlArray[0].ctrlName,adRowCtr)"
                                                          class="btn btn-sm btn-danger me-2 ">-</button>
  
                                                      <ng-container *ngIf="ctrlInfo.jsnControlArray[0].ctrlAddMore[0].columnCls.includes('bhulekh_more_tahasil')">
                                                          <button id="btnArea{{adRowCtr}}" type="button"
                                                          (click)="getBhulekhArea(adRowCtr)"
                                                          class="btn btn-sm btn-success me-2 " *ngIf="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[0].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[0].columnCls)">Get Area</button>
                                                      </ng-container>
                                                      <ng-container *ngIf="ctrlInfo.jsnControlArray[0].ctrlAddMore[0].columnCls.includes('cage_culture_zone')">
                                                          <button id="btnClusterArea{{adRowCtr}}" type="button"
                                                          (click)="getClusterArea(adRowCtr)"
                                                          class="btn btn-sm btn-success me-2 " *ngIf="enableAddMoreDisable(ctrlInfo.jsnControlArray[0].ctrlAddMore[0].columnId, ctrlInfo.jsnControlArray[0].ctrlAddMore[0].columnCls)">Get Cluster</button>
                                                      </ng-container>
                                                  </td>
                                              </tr>
                                          </ng-container>
  
  
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                  </ng-template>
                  <div *ngIf="ctrlInfo.tinControlType!=8"
                      class="col-md-6 col-lg-4 test22 clsDiv_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                      [ngClass]="ctrlInfo.jsnDispTagArray[0].tagFieldSts == 1?'d-none' : ''">
  
                      <label for="{{ctrlInfo.jsnControlArray[0].ctrlName}}" class="form-label">
                          <ng-container *ngIf="ctrlInfo.tinMandatorySts==1; then shwMndSpn">
                          </ng-container>
                          <ng-template #shwMndSpn>
                              <span class="text-danger">*</span>
                          </ng-template>
                          <span *ngIf="lang==='Odia'; else engLang">
                              {{ctrlInfo.vchLabelNameOdia}}
                          </span>
  
                          <ng-template #engLang>
                              {{ctrlInfo.vchLabelName}}
                          </ng-template>
  
                      </label>
  
                      <div class="form-group">
                          <ng-container [class]="(ctrlInfo.jsnControlArray[0].ctrlName)+'Div'">
                              <ng-container [ngSwitch]="ctrlInfo.tinControlType" id="parentDiv">
                                <input type="button"
                                *ngIf="ctrlInfo.jsnControlArray[0].ctrlClass.includes('ifsc_save_code')"
                                value="Saving Bank" class="btn btn-success btn-sm float-end mt-1"
                                (click)="getSavingIFSC()">
                            <!-- <input type="button"
                                *ngIf="ctrlInfo.jsnControlArray[0].ctrlClass.includes('ifsc_loan_code')"
                                value="Loan Bank" class="btn btn-success btn-sm float-end mt-1"
                                (click)="getLoanIFSC()"> -->
                                  <ng-container *ngSwitchCase="'1'">
                                      <ng-container
                                          *ngFor="let optInfo of ctrlInfo.jsnOptionArray[0].optionArr;let optK=index;">
                                          <input type="checkbox"
                                              class="{{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm cls_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              id="{{ctrlInfo.jsnControlArray[0].ctrlId+'_'+optK}}"
                                              [attr.data-lblname]="ctrlInfo.vchLabelName"
                                              [attr.data-sectype]="ctrlInfo.tinSectionType"
                                              [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                              [attr.data-ctrltype]="ctrlInfo.tinControlType" data-othval=""
                                              [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength" />
                                          <label
                                              [for]="ctrlInfo.jsnControlArray[0].ctrlName+'_'+optK">&nbsp;{{optInfo.optionText}}</label>&nbsp;&nbsp;
                                      </ng-container>
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'2'">
                                      <select #{{ctrlInfo.jsnControlArray[0].ctrlName}}
                                          class="form-select {{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm cls_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                          [attr.data-lblname]="ctrlInfo.vchLabelName"
                                          [attr.data-sectype]="ctrlInfo.tinSectionType"
                                          [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                          [attr.data-ctrltype]="ctrlInfo.tinControlType" data-othval=""
                                          [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength" (change)="getDynamicSelect($event);">
                                          <option value="">Select</option>
  
                                          <ng-container
                                              *ngFor="let optInfo of ctrlInfo.jsnOptionArray[0].optionArr;let optK=index;">
                                              <option
                                                  *ngIf="checkClassExist(ctrlInfo.jsnControlArray[0].ctrlClass)"
                                                  [selected]="optInfo.optionValue == ctrlInfo.vchFieldValue"
                                                  value="{{optInfo.optionValue}}">{{optInfo.optionText}}
                                              </option>
                                          </ng-container>
  
                                      </select>
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'4'">&nbsp;:
                                      <label><strong>{{ctrlInfo.jsnControlArray[0].labelText}}</strong></label>
                                      <input type="hidden" class="{{ctrlInfo.jsnControlArray[0].ctrlClass}}"
                                          formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                          [attr.data-lblname]="ctrlInfo.vchLabelName"
                                          [attr.data-sectype]="ctrlInfo.tinSectionType"
                                          [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                          [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                          [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength" />
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'5'">
                                      <ng-container
                                          *ngFor="let optInfo of ctrlInfo.jsnOptionArray[0].optionArr;let optK=index;">
                                          <input type="radio"
                                              class="{{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm cls_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              value="{{optInfo.optionValue}}"
                                              formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              id="{{ctrlInfo.jsnControlArray[0].ctrlId+'_'+optK}}"
                                              [checked]="ctrlInfo.jsnControlArray[0].ctrlValue==optInfo.optionValue"
                                              [attr.data-lblname]="ctrlInfo.vchLabelName"
                                              [attr.data-sectype]="ctrlInfo.tinSectionType"
                                              [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                              [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                              [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength" />
                                          <label
                                              [for]="ctrlInfo.jsnControlArray[0].ctrlName+'_'+optK">&nbsp;{{optInfo.optionText}}</label>&nbsp;&nbsp;
                                      </ng-container>
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'6'">
                                      <input type="text"
                                          [readonly]="enableDisable(ctrlInfo.jsnControlArray[0].ctrlName, ctrlInfo.jsnControlArray[0].ctrlClass)"
                                          class="form-control {{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm cls_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                          [attr.data-lblname]="ctrlInfo.vchLabelName"
                                          [attr.data-sectype]="ctrlInfo.tinSectionType"
                                          [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                          [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                          [maxLength]="ctrlInfo.intFieldLength"
                                          (keypress)="keyPressEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                          (keyup)="keyUpEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                          autocomplete="off" data-othval=""
                                          [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength"
                                          data-valdtn="0" appBlockCopyPaste />
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'7'">
                                      <textarea #{{ctrlInfo.jsnControlArray[0].ctrlName}}
                                          class="form-control {{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm"
                                          formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                          [attr.data-lblname]="ctrlInfo.vchLabelName"
                                          [attr.data-sectype]="ctrlInfo.tinSectionType"
                                          [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                          [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                          [maxLength]="ctrlInfo.intFieldLength" data-othval=""
                                          [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength"
                                          onkeyPress="" data-valdtn="0" rows="1"></textarea>
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'9'">
                                      <div class="input-group">
                                          <input type="text"
                                              [readonly]="enableDisable(ctrlInfo.jsnControlArray[0].ctrlName, ctrlInfo.jsnControlArray[0].ctrlClass)"
                                              class="form-control {{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm cls_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                              [attr.data-lblname]="ctrlInfo.vchLabelName"
                                              [attr.data-sectype]="ctrlInfo.tinSectionType"
                                              [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                              [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                              [maxLength]="ctrlInfo.intFieldLength"
                                              (keypress)="keyPressEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                              (keyup)="keyUpEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                              autocomplete="off" data-othval=""
                                              [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength"
                                              data-valdtn="0" appBlockCopyPaste placeholder="DD/MM/YYYY"
                                              ngbDatepicker #d="ngbDatepicker" readonly [minDate]="minDate"
                                              [maxDate]="maxDate" (click)="d.toggle()" />
  
                                          <span class="input-group-text" (click)="d.toggle()">
                                              <i class="icon-calendar"></i>
                                          </span>
                                      </div>
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'10'">
                                      <div class="input-group">
                                          <input type="time"
                                              [readonly]="enableDisable(ctrlInfo.jsnControlArray[0].ctrlName, ctrlInfo.jsnControlArray[0].ctrlClass)"
                                              class="form-control  {{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm cls_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                              [attr.data-lblname]="ctrlInfo.vchLabelName"
                                              [attr.data-sectype]="ctrlInfo.tinSectionType"
                                              [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                              [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                              [maxLength]="ctrlInfo.intFieldLength"
                                              (keypress)="keyPressEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                              (keyup)="keyUpEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                              autocomplete="off" data-othval=""
                                              [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength"
                                              data-valdtn="0" appBlockCopyPaste />
                                      </div>
                                  </ng-container>
                                  <ng-container *ngSwitchCase="'11'">
                                      <div class="input-group">
                                          <input type="datetime-local"
                                              [readonly]="enableDisable(ctrlInfo.jsnControlArray[0].ctrlName, ctrlInfo.jsnControlArray[0].ctrlClass)"
                                              class="form-control datetime {{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm cls_{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                              id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                              [attr.data-lblname]="ctrlInfo.vchLabelName"
                                              [attr.data-sectype]="ctrlInfo.tinSectionType"
                                              [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                              [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                              [maxLength]="ctrlInfo.intFieldLength"
                                              (keypress)="keyPressEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                              (keyup)="keyUpEvt(ctrlInfo.txtCtrlVldnTyp,$event,ctrlInfo.jsnControlArray[0].ctrlId)"
                                              autocomplete="off" data-othval=""
                                              [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength"
                                              data-valdtn="0" appBlockCopyPaste />
                                      </div>
                                  </ng-container>
                                  <ng-container *ngSwitchDefault>
                                      <input type="text"
                                          class="form-control {{ctrlInfo.jsnControlArray[0].ctrlClass}} clsDynamicFrm"
                                          formControlName="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          name="{{ctrlInfo.jsnControlArray[0].ctrlName}}"
                                          id="{{ctrlInfo.jsnControlArray[0].ctrlId}}"
                                          [attr.data-lblname]="ctrlInfo.vchLabelName"
                                          [attr.data-sectype]="ctrlInfo.tinSectionType"
                                          [attr.data-frmconfgid]="ctrlInfo.intFormConfigId"
                                          [attr.data-ctrltype]="ctrlInfo.tinControlType"
                                          [maxLength]="ctrlInfo.intFieldLength" autocomplete="off"
                                          data-othval=""
                                          [attr.data-mandatory]="ctrlInfo.tinMandatorySts+'|'+ctrlInfo.tinControlType+'|'+(ctrlInfo.jsnControlArray[0].ctrlName)+'|'+ctrlInfo.vchLabelName+'|'+ctrlInfo.intFieldLength"
                                          data-valdtn="0" appBlockCopyPaste />
                                  </ng-container>
  
                              </ng-container>
                          </ng-container>
                      </div>
                  </div>
                           </ng-container>
                          </div>
                      </div>
                      <div class="text-center m-1">
                        <button class="btn btn-success me-2" [disabled]="isLoading">

                            <ng-container *ngIf="!isLoading; else loadingTemplate">Save</ng-container>
                        <ng-template #loadingTemplate>
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            Loading...
                        </ng-template>
                        </button>
                      </div>
                    </div>
  
                </form>
              <!-- </div>
            </div> -->
          </ng-template>
  
        </div>
       <!-- End trigger modal --> 
  
  
        <div class="row" *ngIf="(completeItem==totalItem) || (editPhaseActivity==0 && progress==1)">
        <div class="row" *ngFor="let completionDoc of completionDocument;let i= index;">
          <div class="col-md-4 col-lg-4" >
              <div class="form-group">
                  <label class="form-label" id="{{completionDoc.intDocumentId}}_label">
                    <span class="text-danger" *ngIf="completionDoc.tinIsMandatory==1">*</span>{{completionDoc.vchDocumentName}}</label>
              </div>
          </div>
          <div class="col-md-6 col-lg-6">
              <div class="row">
                  <div class="col-md-8 col-lg-8">
                      <div class="form-group">
                          <input type="file" id="{{completionDoc.intDocumentId}}_intmnFile"
                            class="form-control"/>
                          <div class="d-flex justify-content-between">
                              <small class="text-danger">Only {{completionDoc.vchFileType}} max size {{completionDoc.smiFileSize}} MB</small>
                              <a class="text-danger h5"
                               title="Download" target="_blank" href="{{intimationDocument[i].vchDocumentFile}}" *ngIf="editPhaseActivity==0 "><i
                                class="icon-file-download-solid" ></i> </a>
                                <input type="hidden" id="{{completionDoc.intDocumentId}}_hdnintmnFile"
                            class="form-control" *ngIf="editPhaseActivity==0 " value="{{intimationDocument[i].vchDoFile}}" />
  
                          </div>
                      </div>
                  </div>
                  
              </div>
          </div>
      </div>
    </div>
  
  
    </ng-container>
  
    <ng-container *ngIf="updStatus==1">
        <div class="table-responsive"  *ngIf="farmerUpdateSts">
            <!-- <div class="row d-md-none" *ngFor="let activity of resDocList; let rwCnt=index;">
                <div class="col-md-6">
                    <div class="card">
                       <div class="card-body">
                           <div class="row">
                                <label class="col-6">SL#</label>
                                <div class="col-6">
                                        {{rwCnt+1}}
                                </div>
                           </div>
                           <div class="row">
                                <label class="col-6">Activity Details</label>
                                <div class="col-6">
                                        {{activity.itemName}}
                                </div>
                           </div>
                           <div class="row">
                                <label class="col-6">Status</label>
                                <div class="col-6">
                                        {{activity.farmerActionStatusTxt}}
                                </div>
                           </div>
                           <div class="row">
                                <label class="col-6">Photos/ Tentetive Date of Complete</label>
                                <div class="col-6">
                                    <div *ngIf="activity.farmerActionStatus == 1; else elseBlock">
                                            {{activity.farmerUpdateDate}}
                                        </div>
  
                                        <ng-template #elseBlock>
                                            <span *ngFor="let farmerUploadedPhoto of activity.farmerUploadedPhoto;" >
                                                <a href="javascript:void(0);" (click)="getPhoto(farmerUploadedPhoto.farmFileUploadUrl)">
                                                    <div class="upload-img-div"> <img src="{{farmerUploadedPhoto.farmFileUploadUrl}}" class="bg-light"
                                                ></div>
                                                </a>
                                            </span>
  
                                        </ng-template>
                                </div>
                           </div>
                           <div class="row">
                                <label class="col-6">Remark</label>
                                <div class="col-6">
                                        {{activity.farmerRemark}}
                                </div>
                           </div>
                       </div>
                    </div>
                </div>
            </div> -->
  
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th style="width:40px">Sl#</th>
                        <th>Activity Details </th>
                        <th width="120px">Status </th>
  
                        <th width="250px">Photos/ Tentetive Date of Complete</th>
                        <th width="350px">Remark </th>
                        <!-- <th>Updated By </th> -->
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let activity of resDocList; let rwCnt=index;">
                        <td>{{rwCnt+1}}</td>
                        <td>{{activity.itemName}}</td>
                        <td>{{activity.farmerActionStatusTxt}}</td>
                        <td>
                            <div *ngIf="activity.farmerActionStatus == 1; else elseBlock">
                                {{activity.farmerUpdateDate}}
                            </div>
  
                            <ng-template #elseBlock>
                                <span *ngFor="let farmerUploadedPhoto of activity.farmerUploadedPhoto;" >
                                    <a href="javascript:void(0);" (click)="getPhoto(farmerUploadedPhoto.farmFileUploadUrl)">
                                       <div class="upload-img-div"> <img src="{{farmerUploadedPhoto.farmFileUploadUrl}}" class="bg-light"
                                   ></div>
                                    </a>
                                </span>
  
                            </ng-template>
                        </td>
                        <td>{{activity.farmerRemark}}</td>
  
                        <!-- <td *ngIf="activity.farmerActionStatus > 0;">
                                Self
                        </td>  -->
                    </tr>
                </tbody>
            </table>
        </div>
  
        <div class="row" *ngIf="docResFlg==1">
  
            <!-- <div class="col-md-12 col-lg-12">
                <div class="form-group"> -->
                    <label class="form-label"><strong>Uploaded Intimation Document</strong> : </label>
                    <!-- <label class="form-label"> <a *ngIf="docResUpFlNm!='';" class="text-danger h5" download
                            title="Download" target="_blank" href="{{docResUpFlNm}}"><i
                                class="icon-file-download-solid"></i> </a></label> -->
                    <div *ngFor="let intimation of intimationDocument"class="col-md-3" >
                      <div class="col-md-4" *ngIf="intimation.vchDoFile!=''">
                        <label class="form-label">{{intimation.vchLableNm}} </label>
                      </div>
                        <div class="col-md-4" *ngIf="intimation.vchDoFile!=''">
                            <a class="text-danger h5" download
                            title="Download" target="_blank" href="{{intimation.vchDocumentFile}}"><i
                                class="icon-file-download-solid"></i> </a>
                      </div>
                    </div>
                </div>
            <!-- </div>
        </div> -->
  
        <div class="table-responsive mt-2" *ngIf="authUpdateSts">
            <div class="separator separator-dashed"></div>
            <h6><strong>Authority Verification Details</strong></h6>
            <div class="table-responsive" >
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th style="width:40px">Sl#</th>
                        <th>Activity Details </th>
                        <th width="120px">Status </th>
  
                        <th width="250px">Geo-tagged Photos/ Tentetive Date of Complete</th>
                        <th width="350px">Remark </th>
                        <!-- <th>Updated By </th> -->
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let activity of resDocList; let rwCnt=index;">
                        <td>{{rwCnt+1}}</td>
                        <td>{{activity.itemName}}</td>
                        <td>{{activity.authActionStatusTxt}}</td>
                        <td>
                            <div *ngIf="activity.authActionStatus == 1; else elseBlock">
                                {{activity.authUpdateDate}}
                            </div>
  
                            <ng-template #elseBlock>
                                <span *ngFor="let authUploadedPhoto of activity.authUploadedPhoto;" >
                                    <a href="javascript:void(0);" (click)="getPhoto(authUploadedPhoto.authFileUploadUrl)">
                                        <div class="upload-img-div"> <img src="{{authUploadedPhoto.authFileUploadUrl}}" class="bg-light"
                                   ></div>
                                    </a>
                                </span>
  
                            </ng-template>
                        </td>
                        <td>{{activity.authRemark}}</td>
  
                        <!-- <td *ngIf="activity.authActionStatus == 2;">
                               Authority
                        </td>  -->
                    </tr>
                </tbody>
            </table>
        </div>
        </div>
  
  
    </ng-container>
  
    <!-- {{updStatus}} -->
    <!-- <div *ngIf="updStatus==1 && subsidyStsId==1" class="mt-2">
        <h6><strong>Subsidy Details</strong></h6>
        <div class="mt-3 row">
            <div class="col-sm-6 d-flex">
                Subsidy Amount: <h6 class="text-success ms-3"> <i class="icon-rupee-sign-solid">{{subsidyAmt}}</i></h6>
            </div>
            <div class="col-sm-6 d-flex">
                Status: <h6 class="text-success ms-3 ">{{subsidySts}}</h6>
            </div>
        </div>
    </div> -->
    <div *ngIf="updStatus==1 && subsidyStsId==1" class="mt-2">
        <div class="separator separator-dashed"></div>
        <h6><strong>Subsidy Details</strong></h6>
        <table class="table table-bordered">
  
            <tbody>
                <tr>
                    <th> Subsidy Amount</th><td class="text-end"><strong><h6 class="text-success ms-3"> <i class="icon-rupee-sign-solid">{{subsidyAmt}}</i></h6></strong></td>
                </tr> <tr>
                    <th> Status </th><td class="text-end"><strong><h6 class="text-success ms-3 ">{{subsidySts}}</h6></strong></td>
                </tr>
            </tbody>
        </table>
    </div>
    <ng-container>
      <div class="row m-2" *ngIf="(completeItem==totalItem) || (editPhaseActivity==0 && progress==1)">
        <div class="col-md-4">Online Completion Document</div>
        <div class="col-md-8">
          <!-- <a  *ngIf="(docResFlg==1 && completeItem==totalItem) || (editPhaseActivity==0 && progress==1)" href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#apponlineCompletion"  class="btn btn-success me-1" >Online Completion</a> -->
          <a href="javascript:void(0)" class="btn btn-success me-1"  (click)="getApplicationData()">Online Completion</a>
          <span *ngIf="this.onlineCompletionData>0">
            <i class="icon-check-solid" style="font-size: 30px;font-weight: bold;"></i>
          </span>
  
        </div>
      </div>
  </ng-container>
  <ng-container *ngIf="( completeItem==totalItem) || (editPhaseActivity==0 && progress==1)">
    <div class="row m-2"  *ngIf="this.onlineCompletionData>0 && this.completionuurl!=''">
      <div class="col-md-4">Online Completion Letter</div>
      <div class="col-md-8" *ngIf="this.completionuurl!=''">
        <a href="{{this.completionuurl}}" target="_blank" class="h5 text-danger"><i class="icon-file-pdf"></i></a>
      </div>
    </div>
  </ng-container>
    <div class="text-center">
  
        <ng-container *ngIf="updStatus==0">
            <button class="btn btn-success me-1" (click)="updateStatus()">Update</button>
            <button class="btn btn-danger" (click)="onReset()">Cancel</button>
        </ng-container>
    </div>
  
  </form>
  <ng-container *ngIf="schemeId==44">
    <hr>
    <div class="row">
        <div class="col-md-12 col-lg-12" >
            <div style="margin-bottom: 10px"><strong style="margin-bottom: 10px">A. 2 nos. of geo-tagged photos.</strong></div>
            <ol type="1">
                <li style="margin-bottom: 10px">1. 1 photo of Capital assets along with beneficiary</li>
                <li style="margin-bottom: 10px">2. 1 photo of Display board of the unit as per the prescribed format of APICOL and Entrepreneur</li>
            </ol>
        </div>
  
    </div>
    <div class="row">
        <div class="col-md-12 col-lg-12" >
            <div style="margin-bottom: 10px"><strong >B. 7 documents to be uploaded (Mandatory) at the time submission of Beneficiary completion</strong></div>
            <ol type="1">
                <li style="margin-bottom: 10px">1. Actual Lay out design of the established unit with detailed work done estimate prepared after completion date of the project by Engineering personnel not below the rank of Asst. Engineer of the concerned district /designated valuer of financing bank duly countersigned by concerned bank manager.</li>
                <li style="margin-bottom: 10px">2. Authentic bills and vouchers with abstract sheet (Electrification, water supply, Equipment etc except civil items/work).</li>
                <li style="margin-bottom: 10px">3. Purchase receipt of Fish/Livestock/Seeds etc duly certified by BLO.</li>
                <li style="margin-bottom: 10px">4. Valid insurance documents of capital assets.</li>
                <li style="margin-bottom: 10px">5. Subsidy non-availing certificate (self declared) by Entrepreneur in prescribed format.</li>
                <li style="margin-bottom: 10px">6. Bank sanction letter and loan disbursement statement.</li>
                <li style="margin-bottom: 10px">7. Project completion Report-cum-application for sanction/disbursement of capital investment subsidy from Agro-entrepreneur (in present format i.e Annexure-IV).</li>
            </ol>
        </div>
  
    </div>
  </ng-container>
  <div class="loader" *ngIf="loading">
    <div class="loader-item"></div>
    <p>Loading...</p>
  </div>
  <ng-template #someModal id="someModal" let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">&nbsp;</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        (click)="modal.dismiss('Cross click')">
                        <i class="icon-times-solid"></i>
                </button>
        </div>
        <div class="modal-body">
            <img src="{{imageURL}}" class="bg-light" style="width: 100%">
        </div>
  
  </ng-template>
  
  <ng-template #someSaveModal id="someSaveModal" let-modal>
    <form [formGroup]="ifscForm" (ngSubmit)="searchIFSC();">
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Find IFSC Code</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                (click)="modal.dismiss('Cross click')">
                <i class="icon-times-solid"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-5 col-lg-5">
                    <div class="form-group">
                        <label><span class="text-danger">*</span> {{ 'Bank Name' | translate}} </label>
                        <select class="form-select" formControlName="vchBankName"
                            [ngClass]="{ 'is-invalid': ifscSubmitted && j.vchBankName.errors }">
                            <option value="">Select</option>
                            <option *ngFor="let bank of BankNames;" value="{{bank.vch_Bank_Name}}">
                                {{bank.vch_Bank_Name}}</option>
                        </select>
                        <div *ngIf="ifscSubmitted && j.vchBankName.errors" class="invalid-feedback">
                            <div *ngIf="j.vchBankName.errors.required">Select bank</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 col-lg-5">
                    <div class="form-group">
                        <label><span class="text-danger">*</span> {{ 'District Name' | translate}} </label>
                        <select class="form-select" formControlName="vchDistrictName"
                            [ngClass]="{ 'is-invalid': ifscSubmitted && j.vchDistrictName.errors }">
                            <option value="">Select</option>
                            <option *ngFor="let dist of DistrictNames;" value="{{dist.vch_District}}">
                                {{dist.vch_District}}</option>
                        </select>
                        <div *ngIf="ifscSubmitted && j.vchDistrictName.errors" class="invalid-feedback">
                            <div *ngIf="j.vchDistrictName.errors.required">Select district</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-lg-2 mt-3 ">
                    <div class="form-group">
                        <button class="btn btn-success">Search</button>
                    </div>
                </div>
            </div>
  
  
            <div class="fix-height">
                <div class="row" *ngIf="isIFSCFlag;else norecord ">
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th scope="col" width="50px">Sl#</th>
                                    <th scope="col">Branch Name</th>
                                    <th scope="col">IFSC Code</th>
                                    <th scope="col">Select IFSC</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let b of Banks;let i=index">
                                    <td>{{i + 1 }}</td>
                                    <td>{{b.vch_Branch_Name}}</td>
                                    <td>{{b.vch_Ifsc_Code}}</td>
                                    <td><button class="btn btn-sm btn-success"
                                            (click)="selectIFSC(b.vch_Branch_Name,b.vch_Ifsc_Code,b.int_Min_Account_No,b.int_Max_Account_No )" (click)="modal.dismiss('Cross click')">Select</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <ng-template #norecord>
                    <h6 class="no-content"> No Record Found</h6>
  
                </ng-template>
            </div>
        </div>
        <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark" id="closeModal"  >Close</button>
            </div> -->
    </form>
  </ng-template>
  <ng-template #someLoanModal id="someLoanModal" let-modal>
    <form [formGroup]="ifscLoanForm" (ngSubmit)="searchLoanIFSC();">
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Find IFSC Code</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                (click)="modal.dismiss('Cross click')">
                <i class="icon-times-solid"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-5 col-lg-5">
                    <div class="form-group">
                        <label><span class="text-danger">*</span> {{ 'Bank Name' | translate}} </label>
                        <select class="form-select" formControlName="vchBankName"
                            [ngClass]="{ 'is-invalid': ifscLoanSubmitted && k.vchBankName.errors }">
                            <option value="">Select</option>
                            <option *ngFor="let bank of BankNames;" value="{{bank.vch_Bank_Name}}">
                                {{bank.vch_Bank_Name}}</option>
                        </select>
                        <div *ngIf="ifscLoanSubmitted && k.vchBankName.errors" class="invalid-feedback">
                            <div *ngIf="k.vchBankName.errors.required">Select bank</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 col-lg-5">
                    <div class="form-group">
                        <label><span class="text-danger">*</span> {{ 'District Name' | translate}} </label>
                        <select class="form-select" formControlName="vchDistrictName"
                            [ngClass]="{ 'is-invalid': ifscLoanSubmitted && k.vchDistrictName.errors }">
                            <option value="">Select</option>
                            <option *ngFor="let dist of DistrictNames;" value="{{dist.vch_District}}">
                                {{dist.vch_District}}</option>
                        </select>
                        <div *ngIf="ifscLoanSubmitted && k.vchDistrictName.errors" class="invalid-feedback">
                            <div *ngIf="k.vchDistrictName.errors.required">Select district</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-lg-2 mt-3 ">
                    <div class="form-group">
                        <button class="btn btn-success">Search</button>
                    </div>
                </div>
            </div>
  
  
            <div class="fix-height">
                <div class="row" *ngIf="isLoanIFSCFlag;else norecord ">
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th scope="col" width="50px">Sl#</th>
                                    <th scope="col">Branch Name</th>
                                    <th scope="col">IFSC Code</th>
                                    <th scope="col">Select IFSC</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let b of loanBanks;let i=index">
                                    <td>{{i + 1 }}</td>
                                    <td>{{b.vch_Branch_Name}}</td>
                                    <td>{{b.vch_Ifsc_Code}}</td>
                                    <td><button class="btn btn-sm btn-success"
                                            (click)="selectLoanIFSC(b.int_Ifsc_Id,b.vch_Branch_Name,b.vch_Ifsc_Code,b.int_Min_Account_No,b.int_Max_Account_No )">Select</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <ng-template #norecord>
                    <h6 class="no-content"> No Record Found</h6>
  
                </ng-template>
            </div>
        </div>
        <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark" id="closeModal"  >Close</button>
            </div> -->
    </form>
  </ng-template>
  <ng-container *ngIf="pastActivitiesLength > 0">
    <div class="separator separator-dashed"></div>
    <h6><strong>Update Histroy</strong></h6>
    <div class="accordion" id="accordionExample">
  
  
        <div class="accordion-item" *ngFor="let timeStampKey of elementKey;let rwCnt1 = index;">
            <h5 class="accordion-header" id="headingOne{{rwCnt1}}">
  
                <a class="accordion-button collapsed" type="button" data-bs-toggle="collapse" [attr.aria-controls]="'headingOne'+rwCnt1"
                    [attr.data-bs-target]="'#collapse_'+rwCnt1" aria-expanded="false" >
                    Updated on {{pastActivities[timeStampKey][0].dtmCreatedOn}}
                </a>
            </h5>
            <div id="collapse_{{rwCnt1}}" class="accordion-collapse collapse" [attr.aria-labelledby]="'headingOne'+rwCnt1"
                data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <div class="control-div">
                        <ng-container >
                            <div class="row">
                                <div class="table-responsive mt-2 mb-2">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th style="width:40px">Sl#</th>
                                                <th>Activity Details </th>
                                                <th>Status <span class="text-danger">*</span></th>
                                                <th width="250px">Update Date & Upload  Photos<span class="text-danger">*</span><br><small class="text-danger">Only Png, Jpeg, Jpg (Max size 1 MB)</small></th>
                                                <th width="350px">Remark </th>
                                            </tr>
                                        </thead>
                                            <tbody *ngFor="let farmActivity of pastActivities[timeStampKey];let rwCnt2 = index;">
                                                <tr>
                                                    <td>{{rwCnt2+1}}</td>
                                                    <td>{{farmActivity.itemName}}</td>
                                                    <td width="120px">
                                                        <div *ngIf="farmActivity.farmerActionStatus == 1 else elseBlock1">
                                                           In Progress
                                                        </div>
                                                        <ng-template #elseBlock1>
                                                           Completed
                                                        </ng-template>
                                                    </td>
                                                    <td>
                                                        <div *ngIf="farmActivity.farmerActionStatus == 1; else elseBlock2">
                                                           <p> {{farmActivity.farmerUpdateDateN}}</p>
                                                            <span *ngFor="let farmerprogPhoto of farmActivity.vchFarmerProgPhoto;" >
                                                              <a href="javascript:void(0);" (click)="getPhoto(farmerprogPhoto.farmprogFileUploadUrl)">
                                                                 <div class="upload-img-div"> <img src="{{farmerprogPhoto.farmprogFileUploadUrl}}" class="bg-light"
                                                             alt="Upload image"></div>
                                                              </a>
                                                          </span>
                                                        </div>
  
                                                        <ng-template #elseBlock2>
                                                            <span *ngFor="let farmerUploadedPhoto of farmActivity.farmerUploadedPhoto;" >
                                                                <a href="javascript:void(0);" (click)="getPhoto(farmerUploadedPhoto.farmFileUploadUrl)">
                                                                   <div class="upload-img-div"> <img src="{{farmerUploadedPhoto.farmFileUploadUrl}}" class="bg-light"
                                                               alt="Upload image"></div>
                                                                </a>
                                                            </span>
  
                                                        </ng-template>
                                                    </td>
                                                    <td>{{farmActivity.farmerRemark}}</td>
                                                </tr>
                                            </tbody>
  
                                        </table>
                                </div>
                            </div>
  
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
  
  
  
  
    </div>
  </ng-container>
  